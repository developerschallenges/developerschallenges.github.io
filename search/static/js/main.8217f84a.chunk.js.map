{"version":3,"sources":["components/Results/Result/Result.js","components/Results/Results.js","components/Pager/Pager.js","components/SearchBar/SearchBar.js","contexts/AuthContext.js","pages/Search/Search.js","App/App.js","index.js"],"names":["Result","props","className","href","document","path","title","excerpt","Results","results","documents","map","result","index","key","Pager","useState","currentPage","selectedPage","setSelectedPage","totalPages","Math","ceil","resultCount","resultsPerPage","useEffect","_","setCurrentPage","previousButton","nextButton","i","page_links","minPage","maxPage","parseInt","push","class","onClick","page","rel","id","SearchBar","q","setQ","onSearchHandler","postSearchHandler","onKeyDown","e","keyCode","autoComplete","type","onChange","searchTerm","getElementById","value","searchChangeHandler","defaultValue","style","padding","fontSize","letterSpacing","color","lineHeight","boxSizing","width","border","outline","WebkitApperance","borderRadius","backgroundColor","position","cursor","createContext","Search","location","window","history","setResults","setResultCount","URLSearchParams","search","get","top","skip","setSkip","filters","setFilters","isLoading","setIsLoading","body","axios","post","baseApiUrl","then","response","data","count","catch","error","console","log","pushState","newurl","origin","pathname","left","CircularProgress","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.8217f84a.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default function Result(props) {\r\n    return (\r\n        <div className=\"article-row\">\r\n            <article className=\"article article-summary\">\r\n                <div className=\"article-summary-inner\">\r\n                    <h2 className=\"article-title\">\r\n                        <a href={`/${props.document.path}`} className=\"title\">{props.document.title}</a>\r\n                    </h2>\r\n                    <p className=\"article-excerpt\">\r\n                        {props.document.excerpt}\r\n                    </p>\r\n                </div>\r\n            </article>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Result from './Result/Result';\r\n\r\nexport default function Results(props) {\r\n\r\n  let results = props.documents.map((result, index) => {\r\n    return <Result\r\n      key={index}\r\n      document={result.document}\r\n    />;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {results}\r\n    </>\r\n  );\r\n};\r\n","import React, {useState, useEffect} from 'react';\r\n\r\nexport default function Pager(props) {\r\n    let [selectedPage, setSelectedPage] = useState(props.currentPage);\r\n    let totalPages = Math.ceil(props.resultCount / props.resultsPerPage);\r\n\r\n    useEffect(_=>{\r\n        props.setCurrentPage(selectedPage);\r\n    }, [selectedPage, props]);\r\n\r\n    function goToNextPage() {\r\n        setSelectedPage(selectedPage + 1);\r\n    }\r\n\r\n    function goToPreviousPage() {\r\n        setSelectedPage(selectedPage - 1);\r\n    }\r\n\r\n    var i = 0;\r\n    var page_links = [];\r\n\r\n    var minPage = 1;\r\n    var maxPage = totalPages;\r\n\r\n    if (selectedPage - minPage > 2) {\r\n        minPage = selectedPage - 2;\r\n    }\r\n\r\n    if (maxPage - selectedPage > 2) {\r\n        maxPage = parseInt(selectedPage) + 2;\r\n    }\r\n\r\n    if (minPage >= 2) {\r\n        page_links.push(\r\n            <a class=\"page-number\" href=\"#\" onClick={ () => setSelectedPage(1) }>1</a>\r\n        );\r\n    }\r\n\r\n    if (minPage > 2) {\r\n        page_links.push(\r\n            <span class=\"space\">…</span>\r\n        );  \r\n    }\r\n\r\n    for (i = minPage; i <= maxPage; i++) {\r\n        if (i === parseInt(selectedPage)) {\r\n            page_links.push(\r\n                <span class=\"page-number current\">{i}</span>\r\n            );\r\n        } else {\r\n            page_links.push(\r\n                <a class=\"page-number\" href=\"#\" onClick={function() { var page = i; return function() { setSelectedPage(page) }}()}>{i}</a>\r\n            );\r\n        }\r\n    }\r\n\r\n    if (maxPage < totalPages - 1) {\r\n        page_links.push(\r\n            <span class=\"space\">…</span>\r\n        );  \r\n    }\r\n\r\n    if (maxPage <= totalPages - 1) {\r\n        page_links.push(\r\n            <a class=\"page-number\" href=\"#\" onClick={ () => setSelectedPage(totalPages) }>{totalPages}</a>\r\n        );\r\n    }\r\n\r\n    var previousButton;\r\n    if (parseInt(selectedPage) !== 1) {\r\n        previousButton = (<a class=\"extend prev\" rel=\"prev\" href=\"#\" onClick={goToPreviousPage}>«</a>);\r\n    }\r\n\r\n    var nextButton;\r\n    if (parseInt(selectedPage) !== totalPages) {\r\n        nextButton = (<a class=\"extend next\" rel=\"next\" href=\"#\" onClick={goToNextPage}>»</a>);\r\n    }   \r\n\r\n    return (\r\n        (totalPages > 0) &&\r\n        <nav id=\"page-nav\">\r\n            <span class=\"pages\">Page {props.currentPage} of {totalPages}</span>\r\n            {previousButton}\r\n            {page_links}\r\n            {nextButton}\r\n        </nav>\r\n    );\r\n}","import React, {useState, useEffect} from 'react';\r\n\r\nexport default function SearchBar(props) {\r\n    let [q, setQ] = useState(props.q);\r\n\r\n    const onSearchHandler = () => {\r\n        props.postSearchHandler(q);\r\n    }\r\n\r\n    const onEnterButton = (event) => {\r\n        if (event.keyCode === 13) {\r\n            onSearchHandler();\r\n        }\r\n    }\r\n\r\n    const onChangeHandler = () => {\r\n        var searchTerm = document.getElementById(\"search-box\").value;\r\n        setQ(searchTerm);\r\n\r\n        // use this prop if you want to make the search more reactive\r\n        if (props.searchChangeHandler) {\r\n            props.searchChangeHandler(searchTerm);\r\n        }\r\n    }\r\n\r\n    // https://stackoverflow.com/questions/58442168/why-useeffect-doesnt-run-on-window-location-pathname-changes\r\n    // const useReactSearch = () => {\r\n    //     const [locationSearch, setLocationSearch] = React.useState(window.location.search);\r\n    //     const listenToPopstate = () => {\r\n    //         const winSearch = window.location.search;\r\n    //         setLocationSearch(winSearch);\r\n    //     };\r\n    //     React.useEffect(() => {\r\n    //         window.addEventListener(\"popstate\", listenToPopstate);\r\n    //         return () => {\r\n    //             window.removeEventListener(\"popstate\", listenToPopstate);\r\n    //         };\r\n    //     }, []);\r\n    //     return locationSearch;\r\n    // };\r\n\r\n    // const reactSearch = useReactSearch();\r\n    // useEffect(() => {\r\n    //     const newQ = new URLSearchParams(window.location.search).get('q');\r\n    //     if (newQ !== q) {\r\n    //         props.postSearchHandler(newQ);\r\n    //     }\r\n    // }, [reactSearch])\r\n\r\n    const inputStyle = {\r\n        padding: 10,\r\n        fontSize: 38,\r\n        letterSpacing: -1,\r\n        color: 'rgb(85, 85, 85)',\r\n        lineHeight: '1.3em',\r\n        boxSizing: 'border-box',\r\n        width: 'calc(100% - 80px)',\r\n        border: '1px #3b8dbd solid',\r\n        outline: 'none',\r\n        WebkitApperance: 'none',\r\n        borderRadius: 0\r\n    }\r\n\r\n    const buttonStyle = {\r\n        width: '80px',\r\n        border: '1px #3b8dbd solid',\r\n        backgroundColor: '#3b8dbd',\r\n        color: '#fafafa',\r\n        padding: 12,\r\n        fontSize: 38,\r\n        position: 'absolute',\r\n        cursor: 'pointer'\r\n    }\r\n\r\n    return (\r\n        <div onKeyDown={e => onEnterButton(e)}>\r\n            <input \r\n                autoComplete=\"off\" // setting for browsers; not the app\r\n                type=\"text\"\r\n                id=\"search-box\"\r\n                onChange={onChangeHandler}\r\n                defaultValue={props.q}\r\n                style={inputStyle}>\r\n            </input>\r\n            <button type=\"submit\" onClick={onSearchHandler} style={buttonStyle}>\r\n                <i id=\"icon-search\" className=\"icon\"></i>\r\n            </button>\r\n        </div>\r\n    );\r\n};","import { createContext, useContext } from 'react';\r\n\r\n// Create new auth context\r\nexport const AuthContext = createContext();\r\n\r\n// React hook to use auth context\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport const baseApiUrl = 'https://fa-developerschallenges-search.azurewebsites.net';","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport CircularProgress  from '@material-ui/core/CircularProgress';\r\n\r\nimport Results from '../../components/Results/Results';\r\nimport Pager from '../../components/Pager/Pager';\r\nimport SearchBar from '../../components/SearchBar/SearchBar';\r\n\r\nimport { baseApiUrl } from '../../contexts/AuthContext';\r\n\r\nexport default function Search() {  \r\n  let location = window.location;\r\n  let history = window.history;\r\n  \r\n  const [ results, setResults ] = useState([]);\r\n  const [ resultCount, setResultCount ] = useState(0);\r\n  const [ currentPage, setCurrentPage ] = useState(1);\r\n  const [ q, setQ ] = useState(new URLSearchParams(location.search).get('q') ?? \"\");\r\n  const [ top ] = useState(new URLSearchParams(location.search).get('top') ?? 5);\r\n  const [ skip, setSkip ] = useState(new URLSearchParams(location.search).get('skip') ?? 0);\r\n  const [ filters, setFilters ] = useState([]);\r\n  const [ isLoading, setIsLoading ] = useState(true);\r\n\r\n  let resultsPerPage = top;\r\n  \r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    setSkip((currentPage-1) * top);\r\n    const body = {\r\n      q: q,\r\n      top: top,\r\n      skip: skip,\r\n      filters: filters\r\n    };\r\n\r\n    axios.post(baseApiUrl + '/api/search', body)\r\n        .then( response => {\r\n            setResults(response.data.results);\r\n            setResultCount(response.data.count);\r\n            setIsLoading(false);\r\n        } )\r\n        .catch(error => {\r\n            console.log(error);\r\n            setIsLoading(false);\r\n        });\r\n    \r\n  }, [q, top, skip, filters, currentPage]);\r\n\r\n  // pushing the new search term to history when q is updated\r\n  // allows the back button to work as expected when coming back from the details page\r\n  useEffect(() => {\r\n    if (history.pushState) {\r\n      var newurl = window.location.origin + window.location.pathname + '?q=' + q;\r\n      window.history.pushState({path:newurl},'',newurl);\r\n    }\r\n    setCurrentPage(1);\r\n    setFilters([]);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [q]);\r\n\r\n\r\n  let postSearchHandler = (searchTerm) => {\r\n    //console.log(searchTerm);\r\n    setQ(searchTerm);\r\n  }\r\n\r\n  const containerStyle = {\r\n    position: 'relative'\r\n  }\r\n  const circularProgressStyle = {\r\n    position: 'absolute',\r\n    top: 16,\r\n    left: 'calc(100% - 136px)'\r\n  }\r\n\r\n  var body;\r\n  if (isLoading) {\r\n    body = (\r\n      <div style={circularProgressStyle}>\r\n        <CircularProgress />\r\n      </div>);\r\n  } else {\r\n    body = (\r\n      <div>\r\n        <Results documents={results} top={top} skip={skip} count={resultCount}></Results>\r\n        <Pager currentPage={currentPage} resultCount={resultCount} resultsPerPage={resultsPerPage} setCurrentPage={setCurrentPage}></Pager>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div style={containerStyle}>\r\n      <SearchBar postSearchHandler={postSearchHandler} q={q}></SearchBar>\r\n      {body}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Search from '../pages/Search/Search';\r\n\r\nexport default function App() {\r\n  return (\r\n    <Search />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}