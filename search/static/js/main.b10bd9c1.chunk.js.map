{"version":3,"sources":["components/Results/Result/Result.js","components/Results/Results.js","components/Pager/Pager.js","components/SearchBar/SearchBar.js","contexts/AuthContext.js","pages/Search/Search.js","App/App.js","index.js"],"names":["Result","props","className","href","document","path","title","excerpt","Results","results","documents","map","result","index","key","Pager","totalPages","Math","ceil","resultCount","resultsPerPage","previousButton","nextButton","i","page_links","minPage","maxPage","currentPage","parseInt","push","onClick","e","preventDefault","setCurrentPage","page","rel","id","SearchBar","useState","tempSearchPhrase","setTempSearchPhrase","useEffect","searchPhrase","onSearchHandler","setSearchPhrase","window","history","pushState","newurl","location","origin","pathname","onKeyDown","keyCode","style","position","autoComplete","type","onChange","searchBoxValue","getElementById","value","padding","fontSize","letterSpacing","color","lineHeight","boxSizing","width","border","outline","WebkitApperance","borderRadius","backgroundColor","cursor","height","createContext","Search","URLSearchParams","search","get","setResults","setResultCount","top","isLoading","setIsLoading","isError","setIsError","fetchData","searchBody","q","skip","axios","post","baseApiUrl","then","response","data","count","catch","error","console","log","body","left","CircularProgress","onHistoryHandler","useBrowserHistory","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b10bd9c1.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport default function Result(props) {\r\n    return (\r\n        <div className=\"article-row\">\r\n            <article className=\"article article-summary\">\r\n                <div className=\"article-summary-inner\">\r\n                    <h2 className=\"article-title\">\r\n                        <a href={`/${props.document.path}`} className=\"title\">{props.document.title}</a>\r\n                    </h2>\r\n                    <p className=\"article-excerpt\">\r\n                        {props.document.excerpt}\r\n                    </p>\r\n                </div>\r\n            </article>\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Result from './Result/Result';\r\n\r\nexport default function Results(props) {\r\n\r\n    let results = props.documents.map((result, index) => {\r\n        return <Result\r\n            key={index}\r\n            document={result.document}\r\n        />;\r\n    });\r\n\r\n    return (\r\n        <>\r\n            {results}\r\n        </>\r\n    );\r\n};\r\n","import React from 'react';\r\n\r\nexport default function Pager(props) {\r\n    let totalPages = Math.ceil(props.resultCount / props.resultsPerPage);\r\n\r\n    function goToNextPage(e) {\r\n        e.preventDefault();\r\n        props.setCurrentPage(props.currentPage + 1);\r\n    }\r\n\r\n    function goToPreviousPage(e) {\r\n        e.preventDefault();\r\n        props.setCurrentPage(props.currentPage - 1);\r\n    }\r\n\r\n    var i = 0;\r\n    var page_links = [];\r\n\r\n    var minPage = 1;\r\n    var maxPage = totalPages;\r\n\r\n    if (props.currentPage - minPage > 2) {\r\n        minPage = props.currentPage - 2;\r\n    }\r\n\r\n    if (maxPage - props.currentPage > 2) {\r\n        maxPage = parseInt(props.currentPage) + 2;\r\n    }\r\n\r\n    if (minPage >= 2) {\r\n        page_links.push(\r\n            <a className=\"page-number\" href=\"\" onClick={(e) => { e.preventDefault(); props.setCurrentPage(1); }} key={\"1\"}>1</a>\r\n        );\r\n    }\r\n\r\n    if (minPage > 2) {\r\n        page_links.push(\r\n            <span className=\"space\" key={\"space\"}>…</span>\r\n        );\r\n    }\r\n\r\n    for (i = minPage; i <= maxPage; i++) {\r\n        if (i === parseInt(props.currentPage)) {\r\n            page_links.push(\r\n                <span className=\"page-number current\" key={i}>{i}</span>\r\n            );\r\n        } else {\r\n            page_links.push(\r\n                <a className=\"page-number\" href=\"\" onClick={function () { var page = i; return function (e) { e.preventDefault(); props.setCurrentPage(page); } }()} key={i}>{i}</a>\r\n            );\r\n        }\r\n    }\r\n\r\n    if (maxPage < totalPages - 1) {\r\n        page_links.push(\r\n            <span className=\"space\" key={\"space\"}>…</span>\r\n        );\r\n    }\r\n\r\n    if (maxPage <= totalPages - 1) {\r\n        page_links.push(\r\n            <a className=\"page-number\" href=\"\" onClick={(e) => { e.preventDefault(); props.setCurrentPage(totalPages); }} key={totalPages}>{totalPages}</a>\r\n        );\r\n    }\r\n\r\n    var previousButton;\r\n    if (parseInt(props.currentPage) !== 1) {\r\n        previousButton = (<a className=\"extend prev\" rel=\"prev\" href=\"\" onClick={goToPreviousPage}>«</a>);\r\n    }\r\n\r\n    var nextButton;\r\n    if (parseInt(props.currentPage) !== totalPages) {\r\n        nextButton = (<a className=\"extend next\" rel=\"next\" href=\"\" onClick={goToNextPage}>»</a>);\r\n    }\r\n\r\n    return (\r\n        (totalPages > 0) &&\r\n        <nav id=\"page-nav\">\r\n            <span className=\"pages\">Page {props.currentPage} of {totalPages}</span>\r\n            {previousButton}\r\n            {page_links}\r\n            {nextButton}\r\n        </nav>\r\n    );\r\n}","import React, {useEffect, useState} from 'react';\r\n\r\nexport default function SearchBar(props) {\r\n    const [tempSearchPhrase, setTempSearchPhrase] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        setTempSearchPhrase(props.searchPhrase)\r\n    }, [props.searchPhrase])\r\n    \r\n    const onSearchHandler = () => {\r\n        props.setSearchPhrase(tempSearchPhrase);\r\n        if (window.history.pushState) {\r\n            var newurl = window.location.origin + window.location.pathname + '?q=' + tempSearchPhrase;\r\n            if (window.location.href !== newurl) {\r\n                window.history.pushState('search-phrase', '', newurl);\r\n            }\r\n        }\r\n    }\r\n\r\n    const onEnterButton = (event) => {\r\n        if (event.keyCode === 13) {\r\n            onSearchHandler();\r\n        }\r\n    }\r\n\r\n    const onChangeHandler = () => {\r\n        var searchBoxValue = document.getElementById(\"search-box\").value;\r\n        setTempSearchPhrase(searchBoxValue);\r\n    }\r\n\r\n    const divStyle = {\r\n        position: 'relative'\r\n    }\r\n\r\n    const inputStyle = {\r\n        padding: 10,\r\n        fontSize: 38,\r\n        letterSpacing: -1,\r\n        color: 'rgb(85, 85, 85)',\r\n        lineHeight: '1.3em',\r\n        boxSizing: 'border-box',\r\n        width: 'calc(100% - 80px)',\r\n        border: '1px #3b8dbd solid',\r\n        outline: 'none',\r\n        WebkitApperance: 'none',\r\n        borderRadius: 0\r\n    }\r\n\r\n    const buttonStyle = {\r\n        width: '80px',\r\n        border: '1px #3b8dbd solid',\r\n        backgroundColor: '#3b8dbd',\r\n        color: '#fafafa',\r\n        padding: 12,\r\n        fontSize: 38,\r\n        position: 'absolute',\r\n        cursor: 'pointer',\r\n        height: '100%'\r\n    }\r\n\r\n    return (\r\n        <div onKeyDown={e => onEnterButton(e)} style={divStyle}>\r\n            <input \r\n                autoComplete=\"off\"\r\n                type=\"text\"\r\n                id=\"search-box\"\r\n                onChange={onChangeHandler}\r\n                value={tempSearchPhrase}\r\n                style={inputStyle}>\r\n            </input>\r\n            <button type=\"submit\" onClick={onSearchHandler} style={buttonStyle}>\r\n                <i id=\"icon-search\" className=\"icon\"></i>\r\n            </button>\r\n        </div>\r\n    );\r\n};","import { createContext, useContext } from 'react';\r\n\r\n// Create new auth context\r\nexport const AuthContext = createContext();\r\n\r\n// React hook to use auth context\r\nexport function useAuth() {\r\n    return useContext(AuthContext);\r\n}\r\n\r\n//export const baseApiUrl = 'https://fa-developerschallenges-search.azurewebsites.net';\r\nexport const baseApiUrl = 'https://fa-developerschallenges-search.azurewebsites.net';","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport useBrowserHistory from 'use-browser-history'\r\n\r\nimport Results from '../../components/Results/Results';\r\nimport Pager from '../../components/Pager/Pager';\r\nimport SearchBar from '../../components/SearchBar/SearchBar';\r\n\r\nimport { baseApiUrl } from '../../contexts/AuthContext';\r\n\r\nexport default function Search() {\r\n    let location = window.location;\r\n\r\n    const [searchPhrase, setSearchPhrase] = useState(new URLSearchParams(location.search).get('q') ?? \"\");\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    const [results, setResults] = useState([]);\r\n    const [resultCount, setResultCount] = useState(0);\r\n    const [top] = useState(new URLSearchParams(location.search).get('top') ?? 5);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isError, setIsError] = useState(true);\r\n\r\n    const fetchData = (searchPhrase, page) => {\r\n        const skip = (page - 1) * top;\r\n        const searchBody = {\r\n            q: searchPhrase,\r\n            top: top,\r\n            skip: skip\r\n        };\r\n\r\n        setIsLoading(true);\r\n        setIsError(false);\r\n        axios.post(baseApiUrl + '/api/search', searchBody)\r\n            .then(response => {\r\n                setResults(response.data.results);\r\n                setResultCount(response.data.count);\r\n                setIsLoading(false);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                setIsLoading(false);\r\n                setIsError(true);\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (currentPage === 1) {\r\n            fetchData(searchPhrase, currentPage);\r\n        } else {\r\n            setCurrentPage(1);\r\n        }\r\n    }, [searchPhrase]);\r\n\r\n    useEffect(() => {\r\n        fetchData(searchPhrase, currentPage);\r\n    }, [currentPage]);\r\n\r\n    const containerStyle = {\r\n        position: 'relative'\r\n    }\r\n\r\n    const circularProgressStyle = {\r\n        position: 'absolute',\r\n        top: 16,\r\n        left: 'calc(100% - 136px)'\r\n    }\r\n\r\n    var body;\r\n    if (isLoading) {\r\n        body = (\r\n            <div style={circularProgressStyle}>\r\n                <CircularProgress />\r\n            </div>);\r\n    } else if (isError) {\r\n        body = (\r\n            <div>\r\n                <p>\r\n                    Error fetching results\r\n                </p>\r\n            </div>\r\n        )\r\n    } else {\r\n        body = (\r\n            <div>\r\n                <Results documents={results}></Results>\r\n                <Pager currentPage={currentPage} resultCount={resultCount} resultsPerPage={top} setCurrentPage={setCurrentPage}></Pager>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const onHistoryHandler = () => {\r\n        var searchPhrase = new URLSearchParams(location.search).get('q') ?? \"\";\r\n        setSearchPhrase(searchPhrase);\r\n    }\r\n\r\n    useBrowserHistory(null, false, onHistoryHandler, onHistoryHandler);\r\n\r\n    return (\r\n        <div style={containerStyle}>\r\n            <SearchBar searchPhrase={searchPhrase} setSearchPhrase={setSearchPhrase}></SearchBar>\r\n            {body}\r\n        </div>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Search from '../pages/Search/Search';\r\n\r\nexport default function App() {\r\n  return (\r\n    <Search />\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App/App';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <App />\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}